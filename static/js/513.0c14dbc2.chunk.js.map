{"version":3,"file":"static/js/513.0c14dbc2.chunk.js","mappings":"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","sources":["utils/normalize.js","../node_modules/clsx/dist/clsx.mjs","utils/dates.js","utils/analysis.js","pages/Dashboard/RowActions.jsx","components/ColumnMenu.js","pages/Dashboard/DashboardTable.jsx","components/Toast.js","components/ContractModal.js","../node_modules/idb/build/wrap-idb-value.js","../node_modules/idb/build/index.js","services/dashboard_db.js","services/dashboardSync.js","pages/Dashboard/dashboard.logic.js","pages/Dashboard/DashboardPage.jsx"],"sourcesContent":["// Canonical normalization functions\r\n// PRESERVED EXACT COMPLIANCE with original src/utils.js\r\n\r\nexport const normalize = (str) => {\r\n    if (!str) return \"\";\r\n    let s = str.toLowerCase();\r\n    // Transliterate common Cyrillic look-alikes to Latin\r\n    s = s.replace(/а/g, 'a');\r\n    s = s.replace(/с/g, 'c');\r\n    s = s.replace(/е/g, 'e');\r\n    s = s.replace(/о/g, 'o');\r\n    s = s.replace(/р/g, 'p');\r\n\r\n    const cleanStr = s.replace(/[^a-z0-9]/g, '');\r\n    const letters = (cleanStr.match(/[a-z]/g) || []).sort().join('');\r\n    const numbers = (cleanStr.match(/[0-9]/g) || []).join('');\r\n    return numbers + letters;\r\n};\r\n\r\nexport const normalizePhoneNumber = (phone) => {\r\n    if (!phone) return '';\r\n    let cleaned = phone.replace(/\\D/g, '');\r\n    if (cleaned.startsWith('05') && cleaned.length === 10) return `971${cleaned.substring(1)}`;\r\n    if (cleaned.startsWith('971') && cleaned.length === 12) return cleaned;\r\n    return cleaned;\r\n};\r\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","// Canonical date utilities\r\n// PRESERVED EXACT COMPLIANCE with original src/utils.js\r\n\r\nexport const parseRevenueDate = (dateStr) => {\r\n    // Check if it's already a Date object from cellDates:true\r\n    if (dateStr instanceof Date) {\r\n        return dateStr;\r\n    }\r\n    if (typeof dateStr !== 'string' || !dateStr) {\r\n        return null;\r\n    }\r\n    // Handle ISO format with 'T' and 'Z'\r\n    if (dateStr.includes('T') && dateStr.includes('Z')) {\r\n        return new Date(dateStr);\r\n    }\r\n    // Handle 'YYYY-MM-DD HH:mm:ss' format\r\n    const parts = dateStr.split(' ')[0].split('-');\r\n    if (parts.length === 3) {\r\n        const [year, month, day] = parts.map(p => parseInt(p, 10));\r\n        if (!isNaN(year) && !isNaN(month) && !isNaN(day)) {\r\n            // Month is 0-indexed in JavaScript Date\r\n            return new Date(Date.UTC(year, month - 1, day));\r\n        }\r\n    }\r\n    return null;\r\n};\r\n\r\nexport const formatDateDDMMYYYY = (date) => {\r\n    if (!(date instanceof Date) || isNaN(date)) {\r\n        return 'Invalid Date';\r\n    }\r\n    // Use UTC dates to avoid timezone issues from the UTC date object\r\n    const day = String(date.getUTCDate()).padStart(2, '0');\r\n    const month = String(date.getUTCMonth() + 1).padStart(2, '0'); // Month is 0-indexed\r\n    const year = date.getUTCFullYear();\r\n    return `${day}/${month}/${year}`;\r\n};\r\n\r\nexport const formatDateForDisplay = (dateStr) => {\r\n    if (!dateStr || dateStr.trim() === '') return '';\r\n\r\n    // Handle different date formats and remove time\r\n    let cleanDate = dateStr.toString();\r\n\r\n    // Remove time part if it exists (format: DD-MM-YYYYHHMM or DD/MM/YYYYHHMM)\r\n    const dateTimeMatch = cleanDate.match(/^(\\d{1,2}[-\\/]\\d{1,2}[-\\/]\\d{4})(\\d{4})?/);\r\n    if (dateTimeMatch) {\r\n        cleanDate = dateTimeMatch[1]; // Get only the date part\r\n    } else {\r\n        // Handle space-separated date and time\r\n        cleanDate = cleanDate.split(' ')[0];\r\n    }\r\n\r\n    // Convert all dates to DD/MM/YYYY format\r\n    if (cleanDate.includes('-')) {\r\n        return cleanDate.replace(/-/g, '/');\r\n    }\r\n\r\n    return cleanDate;\r\n};\r\n\r\nexport const parseSheetDate = (dateStr) => {\r\n    if (!dateStr || dateStr.trim() === '') return null;\r\n    const normalizedStr = dateStr.replace(/\\//g, '-');\r\n    const parts = normalizedStr.split('-');\r\n    if (parts.length !== 3) {\r\n        const d = new Date(dateStr);\r\n        return isNaN(d.getTime()) ? null : d;\r\n    }\r\n    let [day, month, year] = parts.map(p => parseInt(p, 10));\r\n    if (isNaN(day) || isNaN(month) || isNaN(year)) {\r\n        const d = new Date(dateStr);\r\n        return isNaN(d.getTime()) ? null : d;\r\n    }\r\n    if (year < 100) year += 2000;\r\n    const d = new Date(Date.UTC(year, month - 1, day));\r\n    return isNaN(d.getTime()) ? null : d;\r\n};\r\n","import { normalize, normalizePhoneNumber } from './normalize';\r\nimport { parseRevenueDate, formatDateDDMMYYYY, parseSheetDate } from './dates';\r\n\r\n// Canonical analysis utilities\r\n// PRESERVED EXACT COMPLIANCE with original src/utils.js\r\n\r\n// Function to analyze multi-car contracts\r\n// This function groups contracts by Contract No. and finds contracts with multiple different cars\r\nexport const analyzeMultiCarContracts = (data) => {\r\n    // تجميع العقود حسب رقم العقد وتجميع السيارات داخل كل عقد\r\n    const contractGroups = {};\r\n    const debugCounts = {};\r\n    // دالة تطبيع رقم اللوحة\r\n    const normalizePlate = (str) => (str || '').toString().replace(/\\s+/g, '').toUpperCase();\r\n    data.forEach(row => {\r\n        const contractNo = row['Contract No.'];\r\n        const plateNumberRaw = row['Plate Number'];\r\n        const plateNumber = normalizePlate(plateNumberRaw);\r\n\r\n        // Try multiple variations for Customer and Model\r\n        const customerName = row['Customer Name'] || row['Customer'] || row['customer'] || row['Name'] || '';\r\n        const carModel = row['Car Model'] || row['Model'] || row['model'] || row['Vehicle'] || '';\r\n\r\n        const revenueDateValue = row['Revenue Date'];\r\n        const revenueDate = parseSheetDate(revenueDateValue);\r\n\r\n        if (!contractNo || !plateNumber || !revenueDate) {\r\n            return;\r\n        }\r\n        if (!contractGroups[contractNo]) {\r\n            contractGroups[contractNo] = {\r\n                contractNo,\r\n                customerName,\r\n                cars: {},\r\n                carsRaw: {},\r\n            };\r\n        }\r\n        if (!contractGroups[contractNo].cars[plateNumber]) {\r\n            contractGroups[contractNo].cars[plateNumber] = {\r\n                plateNumber,\r\n                carModel,\r\n                dates: [],\r\n            };\r\n            contractGroups[contractNo].carsRaw[plateNumber] = plateNumberRaw;\r\n        }\r\n        contractGroups[contractNo].cars[plateNumber].dates.push(revenueDate);\r\n    });\r\n\r\n    // تجهيز النتائج النهائية\r\n    const results = [];\r\n    Object.values(contractGroups).forEach(contract => {\r\n        debugCounts[contract.contractNo] = Object.keys(contract.cars).length + ' => [' + Object.values(contract.carsRaw).join(', ') + ']';\r\n        const carEntries = Object.values(contract.cars);\r\n        if (carEntries.length <= 1) return; // استبعاد العقود التي بها سيارة واحدة فقط\r\n        const carDetails = carEntries.map(car => {\r\n            // حساب أول وآخر تاريخ\r\n            const sortedDates = car.dates.sort((a, b) => a - b);\r\n            return {\r\n                plateNumber: car.plateNumber,\r\n                carModel: car.carModel,\r\n                from: formatDateDDMMYYYY(sortedDates[0]),\r\n                to: formatDateDDMMYYYY(sortedDates[sortedDates.length - 1])\r\n            };\r\n        });\r\n        results.push({\r\n            contractNo: contract.contractNo,\r\n            customerName: contract.customerName,\r\n            carsCount: carEntries.length,\r\n            carDetails\r\n        });\r\n        // Debug: عرض العقود وعدد السيارات\r\n        // alert('عقود وعدد السيارات:\\n' + Object.entries(debugCounts).map(([c, n]) => c + ': ' + n).join('\\n'));\r\n    });\r\n    return results;\r\n};\r\n\r\nexport const getLatestDateIn = (row, maintenanceData) => {\r\n    if (!row || !maintenanceData || !row.invygoPlate) return null;\r\n    const vehicleRecords = maintenanceData.filter(m => normalize(m[\"Vehicle\"]) === normalize(row.invygoPlate));\r\n    if (vehicleRecords.length === 0) return null;\r\n    const datesIn = vehicleRecords.map(r => parseSheetDate(r[\"Date IN\"])).filter(Boolean);\r\n    const datesOut = vehicleRecords.map(r => parseSheetDate(r[\"Date OUT\"])).filter(Boolean);\r\n    if (datesIn.length === 0) return null;\r\n    const latestDateIn = new Date(Math.max(...datesIn.map(d => d.getTime())));\r\n    const latestDateOut = datesOut.length > 0 ? new Date(Math.max(...datesOut.map(d => d.getTime()))) : null;\r\n    if (latestDateOut && latestDateOut.getTime() > latestDateIn.getTime()) return null;\r\n    return latestDateIn;\r\n};\r\n\r\nexport const isMismatch = (row) => {\r\n    const isNumeric = !isNaN(Number(row.bookingNumber));\r\n    const ejar = normalize(row.ejarPlate);\r\n    const invygo = normalize(row.invygoPlate);\r\n    return isNumeric && ejar && invygo && ejar !== invygo;\r\n};\r\n\r\nexport const getDaysSinceLatestIn = (row, maintenanceData) => {\r\n    const latestDate = getLatestDateIn(row, maintenanceData);\r\n    if (!latestDate) return '';\r\n    const today = new Date();\r\n    const diffTime = today.getTime() - latestDate.getTime();\r\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\r\n    return diffDays >= 0 ? diffDays : '';\r\n};\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { normalizePhoneNumber } from '../../utils/normalize';\r\nimport { isMismatch, getLatestDateIn } from '../../utils/analysis';\r\n\r\nconst RowActions = ({ row, maintenanceData, onCopy }) => {\r\n    const [open, setOpen] = useState(false);\r\n    const [coords, setCoords] = useState({ top: 0, left: 0 });\r\n    const buttonRef = useRef(null);\r\n\r\n    const toggle = () => {\r\n        if (!open && buttonRef.current) {\r\n            const rect = buttonRef.current.getBoundingClientRect();\r\n            const spaceBelow = window.innerHeight - rect.bottom;\r\n            const MENU_HEIGHT = 200; // Estimated height\r\n            const isUp = spaceBelow < MENU_HEIGHT;\r\n\r\n            setCoords({\r\n                top: isUp ? rect.top + window.scrollY - 5 : rect.bottom + window.scrollY + 5,\r\n                left: rect.left + window.scrollX,\r\n                isUp\r\n            });\r\n        }\r\n        setOpen(!open);\r\n    };\r\n\r\n    const handleAction = (action) => {\r\n        action.action();\r\n        setOpen(false);\r\n    };\r\n\r\n    // Close on scroll to avoid detached dropdowns\r\n    useEffect(() => {\r\n        if (open) {\r\n            const onScroll = () => setOpen(false);\r\n            window.addEventListener('scroll', onScroll, true);\r\n            return () => window.removeEventListener('scroll', onScroll, true);\r\n        }\r\n    }, [open]);\r\n\r\n    const copyAndOpenWhatsApp = (row, messageTemplate, toastMsg) => {\r\n        const normalizedPhone = normalizePhoneNumber(row.phoneNumber);\r\n        const message = messageTemplate.replace('#XXXXXX', `#${row.bookingNumber}`);\r\n        onCopy(message, toastMsg);\r\n        window.open(`https://wa.me/${normalizedPhone}`, \"_blank\");\r\n    };\r\n\r\n    const options = [\r\n        { label: '1 - Open WhatsApp', action: () => window.open(`https://wa.me/${normalizePhoneNumber(row.phoneNumber)}`, \"_blank\") },\r\n        {\r\n            label: '2 - Welcome Message', action: () => {\r\n                const template = `Good day,\\n\\nThis is Mohamed from Invygo – Yelo Rent A Car. Regarding your booking (#XXXXXX), we have received a service request for the car.\\n\\nTo assist you as quickly as possible, please provide:\\n\\n* A photo of the car’s current mileage (KM)\\n\\n* A photo of the maintenance sticker once open driver door\\n\\n* or details of the issue (if available)\\n\\nWe are here to serve you, Thank you.`;\r\n                copyAndOpenWhatsApp(row, template, 'Welcome message copied!');\r\n            }\r\n        },\r\n        ...(isMismatch(row) && getLatestDateIn(row, maintenanceData) ? [{\r\n            label: '3 - Switch Back Request', action: () => {\r\n                const template = `Good day, this is Mohamed from Invygo – Yelo Rent A Car. Your original car is ready, and we need to switch it back as per your booking (#XXXXXX). Please let me know a suitable time today and share your location. Thank you!`;\r\n                copyAndOpenWhatsApp(row, template, 'Switch back request copied!');\r\n            }\r\n        }] : []),\r\n        {\r\n            label: `${isMismatch(row) && getLatestDateIn(row, maintenanceData) ? '4' : '3'} - Close Complaint`, action: () => {\r\n                const template = `now i will close the request maybe you will receive schedule email please ignore it, as we need to schedule a service in order to close it in the system.`;\r\n                copyAndOpenWhatsApp(row, template, 'Complaint closing message copied!');\r\n            }\r\n        }\r\n    ];\r\n\r\n    const menu = open ? (\r\n        <div style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', zIndex: 9999 }}>\r\n            <div\r\n                style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0 }}\r\n                onClick={() => setOpen(false)}\r\n            />\r\n            <div style={{\r\n                position: 'absolute',\r\n                top: coords.top,\r\n                left: coords.left,\r\n                transform: coords.isUp ? 'translateY(-100%)' : 'none',\r\n                zIndex: 10000,\r\n                background: 'white',\r\n                border: '1px solid #ccc',\r\n                borderRadius: 4,\r\n                boxShadow: '0 2px 10px rgba(0,0,0,0.2)',\r\n                minWidth: 200\r\n            }}>\r\n                {options.map((opt, i) => (\r\n                    <button\r\n                        key={i}\r\n                        onClick={(e) => { e.stopPropagation(); handleAction(opt); }}\r\n                        style={{ display: 'block', width: '100%', padding: '8px 12px', border: 'none', background: 'none', textAlign: 'left', cursor: 'pointer', borderBottom: i < options.length - 1 ? '1px solid #eee' : 'none' }}\r\n                        type=\"button\"\r\n                    >\r\n                        {opt.label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    ) : null;\r\n\r\n    return (\r\n        <>\r\n            <button\r\n                ref={buttonRef}\r\n                className=\"phone-link\"\r\n                onClick={(e) => { e.stopPropagation(); toggle(); }}\r\n                type=\"button\"\r\n                aria-haspopup=\"true\"\r\n                aria-expanded={open}\r\n            >\r\n                {row.phoneNumber}\r\n            </button>\r\n            {open && ReactDOM.createPortal(menu, document.body)}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default RowActions;\r\n","import React from 'react';\r\n\r\nconst ColumnMenu = ({ headers, visibleColumns, setVisibleColumns, setShowColumnMenu, headerDisplayNames }) => {\r\n  const toggleColumn = (e, header) => {\r\n    e.stopPropagation();\r\n    let newVisible = [...(visibleColumns || headers)];\r\n    if (newVisible.includes(header)) {\r\n      newVisible = newVisible.filter(h => h !== header);\r\n    } else {\r\n      newVisible.push(header);\r\n      // Sort according to headers order\r\n      newVisible.sort((a, b) => headers.indexOf(a) - headers.indexOf(b));\r\n    }\r\n    setVisibleColumns(newVisible);\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'absolute', top: '100%', left: 0, zIndex: 200,\r\n      background: 'white', border: '1px solid #ccc', borderRadius: 4,\r\n      boxShadow: '0 4px 12px rgba(0,0,0,0.15)', padding: 10,\r\n      maxHeight: 300, overflowY: 'auto', minWidth: 200\r\n    }} onClick={(e) => e.stopPropagation()}>\r\n      <div style={{ fontWeight: 'bold', marginBottom: 6, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <span>Show Columns</span>\r\n        <button onClick={() => setShowColumnMenu(false)} style={{ border: 'none', background: 'none', cursor: 'pointer', fontWeight: 'bold' }}>X</button>\r\n      </div>\r\n      {headers.map(h => (\r\n        <div key={h} style={{ padding: '4px 0' }}>\r\n          <label style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }}>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={!visibleColumns || visibleColumns.includes(h)}\r\n              onChange={(e) => toggleColumn(e, h)}\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            {headerDisplayNames[h] || h}\r\n          </label>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ColumnMenu;\r\n","import React, { memo } from 'react';\r\nimport clsx from 'clsx';\r\nimport '../../styles/dashboard-table.css';\r\nimport RowActions from './RowActions';\r\nimport ColumnMenu from '../../components/ColumnMenu.js';\r\nimport { formatDateForDisplay } from '../../utils/dates';\r\nimport { isMismatch, getLatestDateIn, isCarExpired, getDaysSinceLatestIn } from '../../utils/analysis';\r\nimport { normalize as normalizeStr } from '../../utils/normalize';\r\n\r\nconst DashboardTable = ({\r\n    data, headers, visibleColumns, columnWidths,\r\n    onColumnResize, onToggleColumnMenu, showColumnMenu,\r\n    setShowColumnMenu, setVisibleColumns, headerDisplayNames,\r\n    duplicatedContractsInfo, maintenanceData,\r\n    isCarExpired, getExpiryDate, getIssueForRow,\r\n    onCustomerClick, onCopy\r\n}) => {\r\n    // Dynamic table based on visibleColumns and headers\r\n    const finalHeaders = (visibleColumns ? headers.filter(h => visibleColumns.includes(h)) : headers);\r\n\r\n    const getColumnClass = (key) => {\r\n        if (key === 'contractNo') return 'col-contract';\r\n        if (key === 'bookingNumber') return 'col-booking';\r\n        if (key === 'customer') return 'col-customer';\r\n        if (key === 'invygoModel' || key === 'ejarModel' || key === 'model1') return 'col-model';\r\n        if (key === 'invygoPlate' || key === 'ejarPlate' || key === 'plateNo1' || key === 'plateNo2') return 'col-plate';\r\n        if (['pickupDate', 'dropoffDate', 'replacementDate', 'revenueDate'].includes(key)) return 'col-date';\r\n        if (key === 'phoneNumber') return 'col-phone';\r\n        if (key === 'pickupBranch') return 'col-branch';\r\n        if (key === 'contact') return 'col-contact';\r\n        if (key === 'contractType') return 'col-type';\r\n        return '';\r\n    };\r\n\r\n    return (\r\n        <div className=\"dashboard-table-wrapper\">\r\n            <table className=\"dashboard-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th className=\"col-index\">\r\n                            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                                #\r\n                                <button\r\n                                    style={{ marginLeft: 6, cursor: 'pointer', background: 'none', border: 'none', fontSize: 16 }}\r\n                                    title=\"Columns\"\r\n                                    type=\"button\"\r\n                                    onClick={(e) => { e.stopPropagation(); onToggleColumnMenu(); }}\r\n                                >⚙️</button>\r\n                                {showColumnMenu && (\r\n                                    <ColumnMenu\r\n                                        headers={headers}\r\n                                        visibleColumns={visibleColumns}\r\n                                        setVisibleColumns={setVisibleColumns}\r\n                                        setShowColumnMenu={setShowColumnMenu}\r\n                                        headerDisplayNames={headerDisplayNames}\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                        </th>\r\n                        {finalHeaders.map(headerKey => (\r\n                            <th key={headerKey} className={getColumnClass(headerKey)}>\r\n                                {headerDisplayNames[headerKey] || headerKey}\r\n                            </th>\r\n                        ))}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {data.map((row, i) => {\r\n                        const plate = normalizeStr(row.invygoPlate);\r\n                        const isDuplicated = duplicatedContractsInfo[plate]?.length > 1;\r\n                        const mismatch = row.type === 'open' && isMismatch(row);\r\n                        const isCarRepaired = mismatch && getLatestDateIn(row, maintenanceData);\r\n\r\n                        const plates = [row.ejarPlate, row.invygoPlate, row.plateNo1, row.plateNo2].filter(Boolean);\r\n                        const hasExpiredCar = row.type === 'open' && plates.some(p => isCarExpired(p));\r\n                        const expiryDate = hasExpiredCar ? getExpiryDate(plate) : null;\r\n\r\n                        const rowClass = clsx({\r\n                            \"row-duplicated\": isDuplicated,\r\n                            \"row-mismatch\": mismatch && !hasExpiredCar,\r\n                            \"row-repaired\": isCarRepaired,\r\n                            \"row-expired\": hasExpiredCar,\r\n                            \"row-even\": i % 2 === 0,\r\n                            \"row-odd\": i % 2 !== 0\r\n                        });\r\n\r\n                        const copyIndexText = () => {\r\n                            if (row.type !== 'open') return;\r\n                            const firstName = (row.customer || \"\").split(\" \")[0];\r\n                            const phone = row.phoneNumber || \"\";\r\n                            const needsSwitchBack = isMismatch(row) && getLatestDateIn(row, maintenanceData);\r\n\r\n                            let text;\r\n                            if (needsSwitchBack) {\r\n                                text = `${row.bookingNumber} - Switch Back\\n\\n${firstName} - ${phone}\\n\\nOld car / ${row.ejarModel} - ${row.ejarPlate}\\n\\nNew car / ${row.invygoModel} - ${row.invygoPlate}`;\r\n                            } else {\r\n                                text = `${row.bookingNumber} - Switch\\n\\n${firstName} - ${phone}\\n\\nOld car / ${row.ejarModel} - ${row.ejarPlate}\\n\\nNew car /`;\r\n                            }\r\n                            onCopy(text, \"WhatsApp message copied!\");\r\n                        };\r\n\r\n                        return (\r\n                            <tr key={i} className={rowClass}>\r\n                                <td className=\"col-index\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={copyIndexText}\r\n                                        className=\"table-action-btn\"\r\n                                        style={{ border: 'none', background: 'none', fontWeight: 'bold', fontSize: 'inherit', color: 'inherit' }}\r\n                                    >\r\n                                        {(row.originalIndex !== undefined ? row.originalIndex : i) + 1}\r\n                                    </button>\r\n                                </td>\r\n                                {finalHeaders.map(headerKey => {\r\n                                    let content = row[headerKey];\r\n                                    const val = row[headerKey];\r\n                                    const colClass = getColumnClass(headerKey);\r\n\r\n                                    // Render content\r\n                                    if (['pickupDate', 'dropoffDate', 'replacementDate', 'revenueDate'].includes(headerKey)) {\r\n                                        content = formatDateForDisplay(val);\r\n                                    } else if (headerKey === 'contractNo') {\r\n                                        content = (\r\n                                            <div style={{ display: 'flex', alignItems: 'center', gap: 5, justifyContent: 'center' }}>\r\n                                                <a href=\"https://ejar.iyelo.com:6300/app/rental/contracts\" onClick={(e) => { e.preventDefault(); onCopy(val, `Contract ${val} copied!`); window.open(e.currentTarget.href, \"_blank\"); }} className=\"table-link\" style={{ color: 'inherit' }}>\r\n                                                    {val}\r\n                                                </a>\r\n                                                {isDuplicated && <span title=\"Duplicated Contract\">⚠️</span>}\r\n                                            </div>\r\n                                        );\r\n                                    } else if (headerKey === 'bookingNumber') {\r\n                                        content = <a href=\"https://dashboard.invygo.com/bookings\" onClick={(e) => { e.preventDefault(); onCopy(val, `Booking ${val} copied!`); window.open(e.currentTarget.href, \"_blank\"); }} className=\"table-link\" style={{ color: 'inherit' }}>{val}</a>;\r\n                                    } else if (headerKey === 'customer') {\r\n                                        content = <button type=\"button\" onClick={() => onCustomerClick(row)} className=\"table-link\" style={{ background: 'none', border: 'none', fontSize: 'inherit', cursor: 'pointer', padding: 0, textDecoration: 'underline', color: 'inherit' }}>{val}</button>;\r\n                                    } else if (headerKey === 'phoneNumber' && row.type === 'open') {\r\n                                        content = <RowActions row={row} maintenanceData={maintenanceData} onCopy={onCopy} />;\r\n                                    } else if (headerKey === 'ejarPlate' || headerKey === 'invygoPlate') {\r\n                                        const actualVal = val || (headerKey === 'invygoPlate' ? row.ejarPlate : '');\r\n                                        const isExp = isCarExpired(actualVal);\r\n                                        const expD = getExpiryDate(actualVal);\r\n                                        const normPlate = normalizeStr(actualVal);\r\n                                        const duplicates = duplicatedContractsInfo[normPlate];\r\n                                        const otherContract = duplicates?.find(c => c.contractNo !== row.contractNo);\r\n\r\n                                        content = (\r\n                                            <span>\r\n                                                {actualVal} {isExp && '⚠️'}\r\n                                                {isExp && <div style={{ fontSize: '0.8em' }}>Exp: {formatDateForDisplay(expD)}</div>}\r\n                                                {otherContract && (\r\n                                                    <div\r\n                                                        style={{ fontSize: '0.8em', color: '#fff', backgroundColor: '#d32f2f', padding: '2px 4px', borderRadius: 4, marginTop: 4, fontWeight: 'bold', cursor: 'pointer' }}\r\n                                                        onClick={(e) => { e.stopPropagation(); onCopy(otherContract.contractNo, `Contract ${otherContract.contractNo} copied!`); }}\r\n                                                        title=\"Click to copy contract number\"\r\n                                                    >\r\n                                                        ⚠️ Rented to: {otherContract.customer}\r\n                                                    </div>\r\n                                                )}\r\n                                            </span>\r\n                                        );\r\n                                    } else if (headerKey === 'invygoModel') {\r\n                                        const actualModel = val || row.ejarModel;\r\n                                        const days = isCarRepaired ? getDaysSinceLatestIn(row, maintenanceData) : '';\r\n                                        content = (\r\n                                            <span>\r\n                                                {actualModel}\r\n                                                {isCarRepaired && <div className=\"repaired-info\">Repaired: {days} days ago</div>}\r\n                                            </span>\r\n                                        );\r\n                                    } else if (headerKey === 'issue') {\r\n                                        content = getIssueForRow(row, maintenanceData);\r\n                                    } else if (headerKey === 'contractType') {\r\n                                        const contractTypeDisplay = { open: 'Open', closed_invygo: 'Closed (Invygo)', closed_other: 'Closed (Other)' };\r\n                                        content = contractTypeDisplay[row.type] || row.type;\r\n                                    }\r\n\r\n                                    return (\r\n                                        <td key={headerKey} className={colClass} title={typeof content === 'string' ? content : undefined}>\r\n                                            {content}\r\n                                        </td>\r\n                                    );\r\n                                })}\r\n                            </tr>\r\n                        );\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(DashboardTable);\r\n","import React from 'react';\n\n// Toast component for copy notifications\nexport default function Toast({ message, show }) {\n  if (!show) return null;\n\n  return (\n    <div style={{\n      position: 'fixed',\n      bottom: '20px',\n      left: '50%',\n      transform: 'translateX(-50%)',\n      backgroundColor: '#28a745',\n      color: 'white',\n      padding: '12px 24px',\n      borderRadius: '8px',\n      zIndex: 10000,\n      boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n      transition: 'opacity 0.5s',\n    }}>\n      {message}\n    </div>\n  );\n}\n","import React, { useEffect, useRef } from 'react';\nimport { formatDateForDisplay } from '../utils/dates';\n\nconst ContractModal = ({ contract, onClose }) => {\n  const modalRef = useRef(null);\n  const closeButtonRef = useRef(null);\n\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === 'Escape') onClose();\n      if (e.key === 'Tab') {\n        const focusable = modalRef.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n        const first = focusable[0];\n        const last = focusable[focusable.length - 1];\n        if (e.shiftKey && document.activeElement === first) {\n          e.preventDefault();\n          last.focus();\n        } else if (!e.shiftKey && document.activeElement === last) {\n          e.preventDefault();\n          first.focus();\n        }\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    closeButtonRef.current?.focus();\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [onClose]);\n\n  if (!contract) return null;\n\n  const fields = [\n    { label: 'Contract No.', key: row => row.contractNo || row['Contract No.'] },\n    { label: 'Booking Number', key: row => row.bookingNumber || row['Booking Number'] },\n    { label: 'Customer', key: row => row.customer || row['Customer Name'] },\n    { label: 'Phone', key: row => row.phoneNumber || row['Phone Number'] },\n    { label: 'Type', key: row => row.contractType || row.type },\n    { label: 'Status', key: row => row.status || 'Active' },\n    { label: 'Invygo Model', key: row => row.invygoModel || row['Model'] },\n    { label: 'Invygo Plate', key: row => row.invygoPlate || row['INVYGO'] },\n    { label: 'Ejar Model', key: row => row.ejarModel || row['Model ( Ejar )'] },\n    { label: 'Ejar Plate', key: row => row.ejarPlate || row['EJAR'] },\n    { label: 'Pick-up Date', key: row => formatDateForDisplay(row.pickupDate || row['Pick-up Date']) },\n    { label: 'Drop-off Date', key: row => formatDateForDisplay(row.dropoffDate || row['Drop-off Date']) },\n    { label: 'Replacement Date', key: row => formatDateForDisplay(row.replacementDate || row['Replacement Date']) },\n    { label: 'Pick-up Branch', key: row => row.pickupBranch || row['Pick-up Branch'] },\n  ];\n\n  const validFields = fields.filter(f => f.key(contract));\n\n  return (\n    // eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n    <div\n      style={{\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.7)', display: 'flex',\n        alignItems: 'center', justifyContent: 'center', zIndex: 1000\n      }}\n      onClick={onClose}\n      onKeyDown={(e) => { if (e.key === 'Escape') onClose(); }}\n      role=\"button\"\n      tabIndex={-1}\n    >\n      {/* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */}\n      <div\n        style={{\n          backgroundColor: '#fff', padding: '24px', borderRadius: '12px',\n          maxWidth: '600px', width: '90%', maxHeight: '90vh',\n          overflowY: 'auto', boxShadow: '0 4px 20px rgba(0,0,0,0.2)',\n          cursor: 'default'\n        }}\n        onClick={e => e.stopPropagation()}\n        ref={modalRef}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"modal-title\"\n      >\n        <div style={{\n          marginBottom: '20px', paddingBottom: '10px',\n          borderBottom: '2px solid #ffd600', display: 'flex',\n          justifyContent: 'space-between', alignItems: 'center'\n        }}>\n          <h2 id=\"modal-title\" style={{ margin: 0, color: '#6a1b9a' }}>Contract Details</h2>\n          <button\n            ref={closeButtonRef}\n            style={{ background: 'none', border: 'none', fontSize: '24px', cursor: 'pointer', color: '#6a1b9a' }}\n            onClick={onClose}\n            aria-label=\"Close modal\"\n          >\n            &times;\n          </button>\n        </div>\n\n        <div>\n          {validFields.map((field, index) => (\n            <div key={index} style={{ display: 'flex', marginBottom: '12px', borderBottom: '1px solid #f0f0f0', paddingBottom: '8px' }}>\n              <div style={{ fontWeight: 'bold', width: '180px', color: '#6a1b9a', flexShrink: 0 }}>{field.label}:</div>\n              <div style={{ flexGrow: 1, wordBreak: 'break-word' }}>{field.key(contract)}</div>\n            </div>\n          ))}\n          {contract.issue && (\n            <div style={{ display: 'flex', marginBottom: '12px', color: 'red' }}>\n              <div style={{ fontWeight: 'bold', width: '180px' }}>Reported Issue:</div>\n              <div style={{ fontWeight: 'bold' }}>{contract.issue}</div>\n            </div>\n          )}\n        </div>\n\n        <div style={{ textAlign: 'right', marginTop: '20px' }}>\n          <button\n            onClick={onClose}\n            style={{ padding: '10px 20px', background: '#6a1b9a', color: '#fff', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: 'bold' }}\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ContractModal;\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","import { openDB } from 'idb';\r\n\r\nconst DB_NAME = 'dashboard_db';\r\nconst DB_VERSION = 4;\r\n\r\nexport const STORES = {\r\n    OPEN_CONTRACTS: 'open_contracts',\r\n    CLOSED_INVYGO: 'closed_invygo',\r\n    CLOSED_OTHER: 'closed_other',\r\n    MAINTENANCE: 'maintenance',\r\n    CARS: 'cars',\r\n    METADATA: 'metadata'\r\n};\r\n\r\nconst dbPromise = openDB(DB_NAME, DB_VERSION, {\r\n    upgrade(db) {\r\n        // Create object stores\r\n        if (!db.objectStoreNames.contains(STORES.OPEN_CONTRACTS)) {\r\n            db.createObjectStore(STORES.OPEN_CONTRACTS, { keyPath: 'id', autoIncrement: true });\r\n        }\r\n        if (!db.objectStoreNames.contains(STORES.CLOSED_INVYGO)) {\r\n            db.createObjectStore(STORES.CLOSED_INVYGO, { keyPath: 'id', autoIncrement: true });\r\n        }\r\n        if (!db.objectStoreNames.contains(STORES.CLOSED_OTHER)) {\r\n            db.createObjectStore(STORES.CLOSED_OTHER, { keyPath: 'id', autoIncrement: true });\r\n        }\r\n        if (!db.objectStoreNames.contains(STORES.MAINTENANCE)) {\r\n            db.createObjectStore(STORES.MAINTENANCE, { keyPath: 'id', autoIncrement: true });\r\n        }\r\n        if (!db.objectStoreNames.contains(STORES.CARS)) {\r\n            db.createObjectStore(STORES.CARS, { keyPath: 'id', autoIncrement: true });\r\n        }\r\n        if (!db.objectStoreNames.contains(STORES.METADATA)) {\r\n            db.createObjectStore(STORES.METADATA);\r\n        }\r\n    },\r\n});\r\n\r\nexport const dashboardDB = {\r\n    async clearAll() {\r\n        const db = await dbPromise;\r\n        const tx = db.transaction(Object.values(STORES), 'readwrite');\r\n        await Promise.all([\r\n            tx.objectStore(STORES.OPEN_CONTRACTS).clear(),\r\n            tx.objectStore(STORES.CLOSED_INVYGO).clear(),\r\n            tx.objectStore(STORES.CLOSED_OTHER).clear(),\r\n            tx.objectStore(STORES.MAINTENANCE).clear(),\r\n            tx.objectStore(STORES.CARS).clear(),\r\n            tx.objectStore(STORES.METADATA).clear(),\r\n        ]);\r\n        await tx.done;\r\n    },\r\n\r\n    async saveAllData(data) {\r\n        const db = await dbPromise;\r\n        const tx = db.transaction(Object.values(STORES), 'readwrite');\r\n\r\n        // Helper to bulk add\r\n        const saveToStore = async (storeName, items) => {\r\n            const store = tx.objectStore(storeName);\r\n            for (const item of items) {\r\n                await store.put(item);\r\n            }\r\n        };\r\n\r\n        await Promise.all([\r\n            saveToStore(STORES.OPEN_CONTRACTS, data.openContracts || []),\r\n            saveToStore(STORES.CLOSED_INVYGO, data.closedInvygo || []),\r\n            saveToStore(STORES.CLOSED_OTHER, data.closedOther || []),\r\n            saveToStore(STORES.MAINTENANCE, data.maintenance || []),\r\n            saveToStore(STORES.CARS, data.cars || []),\r\n            tx.objectStore(STORES.METADATA).put(new Date().toISOString(), 'last_sync')\r\n        ]);\r\n\r\n        await tx.done;\r\n    },\r\n\r\n    async getAllData() {\r\n        const db = await dbPromise;\r\n        return {\r\n            openContracts: await db.getAll(STORES.OPEN_CONTRACTS),\r\n            closedInvygo: await db.getAll(STORES.CLOSED_INVYGO),\r\n            closedOther: await db.getAll(STORES.CLOSED_OTHER),\r\n            maintenance: await db.getAll(STORES.MAINTENANCE),\r\n            cars: await db.getAll(STORES.CARS),\r\n            lastSync: await db.get(STORES.METADATA, 'last_sync')\r\n        };\r\n    }\r\n};\r\n","import { dashboardDB } from './dashboard_db';\r\nimport { GOOGLE_SHEETS_URLS, COLUMN_MAPPINGS } from '../config'; // Import config and mappings\r\nimport Papa from 'papaparse';\r\n\r\n// Helper to fetch using full URL\r\nconst fetchCSV = async (url) => {\r\n    // Check if URL is valid (might be undefined from env)\r\n    if (!url) {\r\n        throw new Error('Missing Google Sheet URL configuration.');\r\n    }\r\n\r\n    // Check if URL is not a CSV export link? Usually config has full export link.\r\n    // The previous .env showed full export?format=csv urls.\r\n    // Let's assume URL is complete.\r\n    // But CORS proxy? config says PROXY_URL exists. \r\n    // Let's assume direct fetch works since previous version did, OR use proxy if needed.\r\n    // dataFetcher.js likely used direct fetch.\r\n\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n        throw new Error(`Failed to fetch CSV: ${response.status} ${response.statusText}`);\r\n    }\r\n    const text = await response.text();\r\n    return new Promise((resolve) => {\r\n        Papa.parse(text, {\r\n            header: true,\r\n            skipEmptyLines: true,\r\n            complete: (results) => resolve(results.data),\r\n        });\r\n    });\r\n};\r\n\r\nconst mapData = (data, mapping) => {\r\n    if (!mapping) return data;\r\n    return data.map(row => {\r\n        const newRow = {};\r\n        Object.keys(row).forEach(key => {\r\n            // Trim key to handle potential whitespace in CSV headers\r\n            const cleanKey = key.trim();\r\n            // If mapping exists, use it. Otherwise keep original key.\r\n            // We check both raw key and trimmed key against mapping just in case.\r\n            // PRIORITIZE EXACT MATCH (key) because config relies on trailing spaces to distinguish columns.\r\n            const mappedKey = mapping[key] || mapping[cleanKey];\r\n            if (mappedKey) {\r\n                newRow[mappedKey] = row[key];\r\n            }\r\n            // We ALSO keep the original key-value pair because some generic logic might use it,\r\n            // and to be safe against missing mappings. \r\n            // However, mixing camelCase and \"Title Case\" is fine.\r\n            newRow[cleanKey] = row[key];\r\n        });\r\n        return newRow;\r\n    });\r\n};\r\n\r\nexport const syncDashboardData = async () => {\r\n    try {\r\n        console.log('Starting Dashboard Sync...');\r\n\r\n        // Use the URLs from config object which maps to env vars\r\n        const [openContractsRaw, closedInvygoRaw, closedOtherRaw, maintenance, cars] = await Promise.all([\r\n            fetchCSV(GOOGLE_SHEETS_URLS.openContracts),\r\n            fetchCSV(GOOGLE_SHEETS_URLS.closedInvygo),\r\n            fetchCSV(GOOGLE_SHEETS_URLS.closedOther),\r\n            fetchCSV(GOOGLE_SHEETS_URLS.maintenance),\r\n            fetchCSV(GOOGLE_SHEETS_URLS.cars)\r\n        ]);\r\n\r\n        console.log('Data fetched, applying mappings...');\r\n\r\n        const openContracts = mapData(openContractsRaw, COLUMN_MAPPINGS.open);\r\n        const closedInvygo = mapData(closedInvygoRaw, COLUMN_MAPPINGS.closed_invygo);\r\n        const closedOther = mapData(closedOtherRaw, COLUMN_MAPPINGS.closed_other);\r\n        // Maintenance and Cars usually don't have mappings in config, so keep raw\r\n\r\n        console.log('Saving into dashboard_db...');\r\n\r\n        const allData = {\r\n            openContracts,\r\n            closedInvygo,\r\n            closedOther,\r\n            maintenance, // Raw\r\n            cars        // Raw\r\n        };\r\n\r\n        // Clear and Save\r\n        await dashboardDB.clearAll();\r\n        await dashboardDB.saveAllData(allData);\r\n\r\n        console.log('Dashboard Sync complete.');\r\n        return { success: true, timestamp: new Date().toISOString() };\r\n    } catch (error) {\r\n        console.error('Dashboard Sync failed:', error);\r\n        return { success: false, error };\r\n    }\r\n};\r\n","import { useState, useMemo, useEffect, useCallback } from 'react';\r\nimport { dashboardDB } from '../../services/dashboard_db';\r\nimport { syncDashboardData } from '../../services/dashboardSync';\r\nimport { normalize as normalizeStr } from '../../utils/normalize';\r\nimport { getExpiryDate as getExpDateUtil, isCarExpired as isCarExpiredUtil, parseSheetDate } from '../../utils/dates';\r\nimport { isMismatch, getLatestDateIn } from '../../utils/analysis';\r\n\r\n// Filter Modes\r\nexport const FILTER_MODES = {\r\n    ALL: 'all',\r\n    MISMATCH: 'mismatch',\r\n    SWITCHBACK: 'switchback',\r\n    EXPIRED: 'expired'\r\n};\r\n\r\nexport const getIssueForRow = (row, maintenanceData) => {\r\n    if (!row.invygoPlate || !maintenanceData) return '';\r\n    const normalizedPlate = normalizeStr(row.invygoPlate);\r\n    const matchingVehicles = maintenanceData.filter(\r\n        (m) => normalizeStr(m.Vehicle) === normalizedPlate\r\n    );\r\n    if (matchingVehicles.length > 0) {\r\n        const vehicleWithoutDateIn = matchingVehicles.find(\r\n            (m) => !m['Date IN'] || m['Date IN'].trim() === ''\r\n        );\r\n        if (vehicleWithoutDateIn) {\r\n            return vehicleWithoutDateIn['Damage Details'] || '';\r\n        }\r\n        return '';\r\n    }\r\n    return '';\r\n};\r\n\r\nexport function useDashboardLogic() {\r\n    // Data State (from DB)\r\n    const [openContracts, setOpenContracts] = useState([]);\r\n    const [closedContracts, setClosedContracts] = useState([]); // Combined Invygo + Other\r\n    const [maintenanceData, setMaintenanceData] = useState([]);\r\n    const [carsData, setCarsData] = useState([]);\r\n\r\n    // UI State\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [lastSync, setLastSync] = useState(null);\r\n    const [isSyncing, setIsSyncing] = useState(false);\r\n\r\n    // Filter/Search State\r\n    const [filterMode, setFilterMode] = useState(FILTER_MODES.ALL);\r\n    const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('');\r\n\r\n    // --- 1. Load Data from Local DB on Mount ---\r\n    const loadFromDB = useCallback(async () => {\r\n        try {\r\n            setLoading(true);\r\n            const data = await dashboardDB.getAllData();\r\n\r\n            setOpenContracts((data.openContracts || []).map(r => ({ ...r, type: 'open' })));\r\n            // Combine closed\r\n            const allClosed = [\r\n                ...(data.closedInvygo || []).map(r => ({ ...r, type: 'closed_invygo' })),\r\n                ...(data.closedOther || []).map(r => ({ ...r, type: 'closed_other' }))\r\n            ];\r\n            setClosedContracts(allClosed);\r\n            setMaintenanceData(data.maintenance || []);\r\n            setCarsData(data.cars || []);\r\n            setLastSync(data.lastSync);\r\n            setLoading(false);\r\n\r\n            // If DB is empty, we attempt an initial sync if it's the very first run (no timestamp)\r\n            if ((!data.openContracts || data.openContracts.length === 0) && !data.lastSync) {\r\n                console.log('DB empty, triggering initial sync via simple refresh call...');\r\n                // We can't call refreshData directly here easily due to deps cycle or closure, \r\n                // so we could set a flag or just rely on the user. \r\n                // Let's rely on user or a separate effect for simplicity to avoid complexity.\r\n                // Actually, let's just trigger a sync once.\r\n                syncDashboardData().then(res => {\r\n                    if (res.success) {\r\n                        // Reload myself\r\n                        dashboardDB.getAllData().then(newData => {\r\n                            setOpenContracts((newData.openContracts || []).map(r => ({ ...r, type: 'open' })));\r\n                            setClosedContracts([\r\n                                ...(newData.closedInvygo || []).map(r => ({ ...r, type: 'closed_invygo' })),\r\n                                ...(newData.closedOther || []).map(r => ({ ...r, type: 'closed_other' }))\r\n                            ]);\r\n                            setMaintenanceData(newData.maintenance || []);\r\n                            setCarsData(newData.cars || []);\r\n                            setLastSync(newData.lastSync);\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n        } catch (err) {\r\n            console.error('Failed to load dashboard data from DB', err);\r\n            setError(err);\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        loadFromDB();\r\n    }, [loadFromDB]);\r\n\r\n    // --- 2. Refresh/Sync Function ---\r\n    const refreshData = async () => {\r\n        try {\r\n            setIsSyncing(true);\r\n            const result = await syncDashboardData();\r\n            if (result.success) {\r\n                await loadFromDB(); // Reload from DB to state\r\n            } else {\r\n                setError(result.error);\r\n            }\r\n        } catch (err) {\r\n            setError(err);\r\n        } finally {\r\n            setIsSyncing(false);\r\n        }\r\n    };\r\n\r\n    // --- Helpers Wrappers ---\r\n    // We wrap these utils to use the local state `carsData`\r\n    const isCarExpired = useCallback((plateNo) => {\r\n        if (!plateNo || !carsData.length) return false;\r\n\r\n        const normalizedPlate = normalizeStr(plateNo);\r\n        // cars data is NOT mapped, it's raw from Google Sheet 'Cars' tab.\r\n        // We need to check what keys 'cars' sheet has. Usually 'Plate No' or 'Plate Number'\r\n        // config says 'REACT_APP_CARS_URL'. usually has 'Plate No'.\r\n        // Previous logic used 'Plate No'.\r\n        const car = carsData.find(car => normalizeStr(car['Plate No'] || car['Plate Number']) === normalizedPlate);\r\n        if (!car || !car['Reg Exp']) return false;\r\n\r\n        // Custom expiry logic matching previous file\r\n        const today = new Date();\r\n        today.setHours(0, 0, 0, 0);\r\n        // Assuming Reg Exp format dd/mm/yyyy\r\n        const parts = car['Reg Exp'].split('/');\r\n        if (parts.length !== 3) return false;\r\n        const expDate = new Date(`${parts[2]}-${parts[1]}-${parts[0]}`); // ISO format for safety\r\n\r\n        if (isNaN(expDate.getTime())) return false;\r\n        expDate.setHours(23, 59, 59, 999);\r\n        return expDate < today;\r\n    }, [carsData]);\r\n\r\n    const getExpiryDate = useCallback((plateNo) => {\r\n        if (!plateNo || !carsData.length) return null;\r\n        const normalizedPlate = normalizeStr(plateNo);\r\n        const car = carsData.find(car => normalizeStr(car['Plate No'] || car['Plate Number']) === normalizedPlate);\r\n        return car ? car['Reg Exp'] : null;\r\n    }, [carsData]);\r\n\r\n    // --- 3. Derived Data & Logic ---\r\n    const { mismatchRows, switchbackRows, expiredRows } = useMemo(() => {\r\n        const mismatch = [];\r\n        const switchback = [];\r\n        const expired = [];\r\n\r\n        openContracts.forEach(row => {\r\n            if (isMismatch(row)) mismatch.push(row);\r\n\r\n            // Switchback Logic: mismatch AND (has replacement) AND (Original Car is Repaired/Back)\r\n            // Note: mapped keys are ejarPlate and ejarModel\r\n            const hasReplacement = (row.ejarPlate && row.ejarPlate.trim() !== '') ||\r\n                (row.ejarModel && row.ejarModel.trim() !== '');\r\n\r\n            // Only count as \"Switch Back\" if the original car is actually back in maintenance\r\n            if (hasReplacement && isMismatch(row)) {\r\n                if (getLatestDateIn(row, maintenanceData)) {\r\n                    switchback.push(row);\r\n                }\r\n            }\r\n\r\n            // Expired Logic\r\n            // Check all plates involved. Mapped keys: ejarPlate, invygoPlate\r\n            // 'Plate No.' and 'Rep Plate no.' were old keys.\r\n            const plates = [row.ejarPlate, row.invygoPlate].filter(Boolean);\r\n\r\n            if (plates.some(p => isCarExpired(p))) {\r\n                expired.push(row);\r\n            }\r\n        });\r\n\r\n        return { mismatchRows: mismatch, switchbackRows: switchback, expiredRows: expired };\r\n    }, [openContracts, isCarExpired, maintenanceData]);\r\n\r\n    // Duplication Check\r\n    const duplicatedContractsInfo = useMemo(() => {\r\n        const plateMap = {};\r\n        openContracts.forEach(c => {\r\n            // Check which plate is relevant. Usually invygoPlate is the main one for open contracts\r\n            const p = c.invygoPlate || c.ejarPlate;\r\n            const plate = normalizeStr(p);\r\n\r\n            if (plate) {\r\n                if (!plateMap[plate]) plateMap[plate] = [];\r\n                plateMap[plate].push({\r\n                    contractNo: c.contractNo, // Mapped key\r\n                    customer: c.customer,     // Mapped key\r\n                    plate: p\r\n                });\r\n            }\r\n        });\r\n\r\n        const duplicates = {};\r\n        Object.keys(plateMap).forEach(key => {\r\n            if (plateMap[key].length > 1) {\r\n                duplicates[key] = plateMap[key];\r\n            }\r\n        });\r\n        return duplicates;\r\n    }, [openContracts]);\r\n\r\n    // --- 4. Search Implementation ---\r\n    // --- 4. Search Implementation (Worker Based) ---\r\n    // We use state for search results instead of memo to handle async worker response\r\n    const [workerSearchResults, setWorkerSearchResults] = useState({ openContractsFromSearch: [], closedContractsFromSearch: [] });\r\n\r\n    useEffect(() => {\r\n        if (!debouncedSearchTerm.trim()) {\r\n            setWorkerSearchResults({ openContractsFromSearch: [], closedContractsFromSearch: [] });\r\n            return;\r\n        }\r\n\r\n        // Initialize worker\r\n        const worker = new Worker(new URL('../../workers/searchWorker.js', import.meta.url));\r\n\r\n        // combine all data for search\r\n        const allContracts = [...openContracts, ...closedContracts];\r\n\r\n        worker.postMessage({\r\n            allContracts,\r\n            searchTerm: debouncedSearchTerm\r\n        });\r\n\r\n        worker.onmessage = (e) => {\r\n            const { openContractsFromSearch, closedContractsFromSearch } = e.data;\r\n            setWorkerSearchResults({\r\n                openContractsFromSearch,\r\n                closedContractsFromSearch\r\n            });\r\n            worker.terminate();\r\n        };\r\n\r\n        worker.onerror = (err) => {\r\n            console.error('Search Worker Error', err);\r\n            worker.terminate();\r\n        };\r\n\r\n        return () => {\r\n            worker.terminate();\r\n        };\r\n    }, [debouncedSearchTerm, openContracts, closedContracts]);\r\n\r\n    // Use the worker results for the main object\r\n    const searchResults = workerSearchResults;\r\n\r\n    // --- 5. Filtering for Main View ---\r\n    const { filteredData } = useMemo(() => {\r\n        if (filterMode === FILTER_MODES.MISMATCH) return { filteredData: mismatchRows };\r\n        if (filterMode === FILTER_MODES.SWITCHBACK) return { filteredData: switchbackRows };\r\n        if (filterMode === FILTER_MODES.EXPIRED) return { filteredData: expiredRows };\r\n        return { filteredData: openContracts };\r\n    }, [filterMode, openContracts, mismatchRows, switchbackRows, expiredRows]);\r\n\r\n    return {\r\n        // State\r\n        loading,\r\n        error,\r\n        filterMode,\r\n        setFilterMode,\r\n        debouncedSearchTerm,\r\n        setDebouncedSearchTerm,\r\n        // Data\r\n        filteredData,\r\n        duplicatedContractsInfo,\r\n        maintenanceData,\r\n        isCarExpired,\r\n        getExpiryDate,\r\n        stats: {\r\n            mismatch: mismatchRows.length,\r\n            switchback: switchbackRows.length,\r\n            expired: expiredRows.length,\r\n            open: openContracts.length\r\n        },\r\n        searchResults,\r\n        // Sync\r\n        refreshData,\r\n        isSyncing,\r\n        lastSync\r\n    };\r\n}\r\n","import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport DashboardTable from './DashboardTable';\r\nimport Toast from '../../components/Toast';\r\nimport ContractModal from '../../components/ContractModal'; // We will check this path\r\nimport { useDashboardLogic, FILTER_MODES, getIssueForRow } from './dashboard.logic';\r\nimport './dashboard.styles.css';\r\n\r\nexport default function DashboardPage() {\r\n    const navigate = useNavigate();\r\n    const {\r\n        loading, error,\r\n        filterMode, setFilterMode,\r\n        debouncedSearchTerm, setDebouncedSearchTerm,\r\n        filteredData, duplicatedContractsInfo,\r\n        maintenanceData, isCarExpired, getExpiryDate,\r\n        stats, searchResults,\r\n        refreshData, isSyncing, lastSync\r\n    } = useDashboardLogic();\r\n\r\n    // Local UI state\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [toastMessage, setToastMessage] = useState(\"\");\r\n    const [showToast, setShowToast] = useState(false);\r\n    const [activeMenuTable, setActiveMenuTable] = useState(null); // 'main', 'open', 'closed'\r\n    const [visibleColumns, setVisibleColumns] = useState(() => {\r\n        try {\r\n            const saved = localStorage.getItem('contracts_visible_columns');\r\n            return saved ? JSON.parse(saved) : null;\r\n        } catch { return null; }\r\n    });\r\n\r\n    const [columnWidths, setColumnWidths] = useState({\r\n        customer: 140, contractNo: 160, invygoPlate: 150,\r\n        ejarPlate: 150, phoneNumber: 150, invygoModel: 200,\r\n        ejarModel: 200, bookingNumber: 150, contractType: 140,\r\n        pickupBranch: 160, contact: 150, model1: 180, dropoffDate: 150,\r\n    });\r\n\r\n    const [selectedContract, setSelectedContract] = useState(null);\r\n    const [showModal, setShowModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (visibleColumns) {\r\n            localStorage.setItem('contracts_visible_columns', JSON.stringify(visibleColumns));\r\n        }\r\n    }, [visibleColumns]);\r\n\r\n    // Debounce search\r\n    // Debounce search - DISABLED (User prefers Enter key)\r\n    /*\r\n    useEffect(() => {\r\n        const handler = setTimeout(() => {\r\n            setDebouncedSearchTerm(searchTerm);\r\n        }, 500);\r\n        return () => clearTimeout(handler);\r\n    }, [searchTerm, setDebouncedSearchTerm]);\r\n    */\r\n\r\n    const handleColumnResize = useCallback((headerKey, newWidth) => {\r\n        setColumnWidths(prev => ({ ...prev, [headerKey]: newWidth }));\r\n    }, []);\r\n\r\n    const showToastNotification = useCallback((msg) => {\r\n        setToastMessage(msg);\r\n        setShowToast(true);\r\n        setTimeout(() => setShowToast(false), 3000);\r\n    }, []);\r\n\r\n    const handleCopy = useCallback((text, msg) => {\r\n        navigator.clipboard.writeText(text).then(() => {\r\n            showToastNotification(msg || \"Copied!\");\r\n        }).catch(err => {\r\n            console.error('Copy failed', err);\r\n            showToastNotification(\"Copy failed\");\r\n        });\r\n    }, [showToastNotification]);\r\n\r\n    // Header helpers\r\n    const headersConfig = {\r\n        open: ['contractNo', 'bookingNumber', 'customer', 'invygoModel', 'invygoPlate', 'ejarModel', 'ejarPlate', 'phoneNumber', 'pickupDate', 'dropoffDate', 'issue'],\r\n        master: ['contractNo', 'contractType', 'bookingNumber', 'customer', 'invygoModel', 'invygoPlate', 'ejarModel', 'ejarPlate', 'model1', 'phoneNumber', 'pickupBranch', 'pickupDate', 'replacementDate', 'dropoffDate', 'contact'],\r\n        switchback: ['contractNo', 'bookingNumber', 'customer', 'invygoModel', 'invygoPlate', 'ejarModel', 'ejarPlate', 'phoneNumber', 'pickupDate', 'dropoffDate']\r\n    };\r\n\r\n    const headerDisplayNames = {\r\n        contractNo: 'Contract No.', revenueDate: 'Revenue Date', bookingNumber: 'Booking Number', customer: 'Customer',\r\n        invygoModel: 'Model', invygoPlate: 'Plate No.', ejarModel: 'Replace Model',\r\n        ejarPlate: 'Rep Plate no.', phoneNumber: 'Phone Number', pickupBranch: 'Pick-up Branch',\r\n        pickupDate: 'Pick-up Date', replacementDate: 'Replacement Date', dropoffDate: 'Drop-off Date',\r\n        model1: 'Model (Repeated)', contact: 'Contact', contractType: 'Contract Type',\r\n        issue: 'Issue'\r\n    };\r\n\r\n    const currentHeaders = useMemo(() => {\r\n        if (filterMode === FILTER_MODES.SWITCHBACK && debouncedSearchTerm.trim() === '') return headersConfig.switchback;\r\n        if (debouncedSearchTerm.trim() === '' && (filterMode === FILTER_MODES.ALL || filterMode === FILTER_MODES.MISMATCH)) return headersConfig.open;\r\n\r\n        // Determine headers based on data presence if searching\r\n        if (filteredData.length === 0) return headersConfig.open;\r\n        const populated = new Set(['contractNo']);\r\n        filteredData.forEach(row => {\r\n            Object.keys(row).forEach(k => {\r\n                if (row[k]) populated.add(k);\r\n            });\r\n        });\r\n        if (debouncedSearchTerm) populated.add('contractType');\r\n        return headersConfig.master.filter(k => populated.has(k));\r\n    }, [filterMode, debouncedSearchTerm, filteredData]);\r\n\r\n\r\n    // Pagination State\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const rowsPerPage = 100;\r\n\r\n    // Reset page when filter or search changes\r\n    useEffect(() => {\r\n        setCurrentPage(1);\r\n    }, [filterMode, debouncedSearchTerm]);\r\n\r\n    // Stable Handlers to prevent re-renders during typing\r\n    const handleToggleMenuOpen = useCallback(() => { setActiveMenuTable(prev => prev === 'open' ? null : 'open'); }, []);\r\n    const handleToggleMenuClosed = useCallback(() => { setActiveMenuTable(prev => prev === 'closed' ? null : 'closed'); }, []);\r\n    const handleToggleMenuMain = useCallback(() => { setActiveMenuTable(prev => prev === 'main' ? null : 'main'); }, []);\r\n\r\n    const handleShowMenuNull = useCallback((val) => { if (!val) setActiveMenuTable(null); }, []);\r\n\r\n    const handleCustomerClick = useCallback((c) => {\r\n        setSelectedContract(c);\r\n        setShowModal(true);\r\n    }, []);\r\n\r\n    // Pagination Helpers\r\n    const paginateData = (data) => {\r\n        const startIndex = (currentPage - 1) * rowsPerPage;\r\n        return data.slice(startIndex, startIndex + rowsPerPage);\r\n    };\r\n\r\n    const PaginationControls = ({ totalRows }) => {\r\n        const totalPages = Math.ceil(totalRows / rowsPerPage);\r\n        if (totalPages <= 1) return null;\r\n\r\n        return (\r\n            <div className=\"pagination-controls\" style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', marginTop: 20, gap: 15 }}>\r\n                <button\r\n                    className=\"control-button\"\r\n                    onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\r\n                    disabled={currentPage === 1}\r\n                >\r\n                    Previous\r\n                </button>\r\n                <span style={{ fontWeight: 'bold' }}>\r\n                    Page {currentPage} of {totalPages}\r\n                </span>\r\n                <button\r\n                    className=\"control-button\"\r\n                    onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\r\n                    disabled={currentPage === totalPages}\r\n                >\r\n                    Next\r\n                </button>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"contracts-dashboard\">\r\n            {showToast && <Toast message={toastMessage} onClose={() => setShowToast(false)} />}\r\n            {showModal && selectedContract && (\r\n                <ContractModal\r\n                    contract={selectedContract}\r\n                    onClose={() => { setShowModal(false); setSelectedContract(null); }}\r\n                />\r\n            )}\r\n\r\n            <div className=\"dashboard-header\">\r\n                <h1>Car Rental Dashboard</h1>\r\n                <p>Contracts & Analysis</p>\r\n            </div>\r\n\r\n            <div className=\"controls-container\">\r\n                <button className=\"control-button\" onClick={() => navigate('/multi-car')}>\r\n                    🚗 Multi-Car Analysis\r\n                </button>\r\n                <input\r\n                    className=\"search-input\"\r\n                    placeholder=\"🔍 Search (Press Enter)...\"\r\n                    value={searchTerm}\r\n                    onChange={e => setSearchTerm(e.target.value)}\r\n                    onKeyDown={(e) => {\r\n                        if (e.key === 'Enter') {\r\n                            setDebouncedSearchTerm(searchTerm);\r\n                        }\r\n                    }}\r\n                />\r\n                <button\r\n                    className=\"control-button\"\r\n                    onClick={refreshData}\r\n                    disabled={isSyncing}\r\n                    style={{ backgroundColor: '#1976d2', color: 'white', border: 'none', marginLeft: 10 }}\r\n                    title={lastSync ? `Last updated: ${new Date(lastSync).toLocaleString()}` : 'Never updated'}\r\n                >\r\n                    {isSyncing ? '⌛ Syncing...' : '🔄 Refresh DB'}\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"filter-buttons\">\r\n                <button\r\n                    className={`control-button ${filterMode === FILTER_MODES.ALL ? 'active' : ''}`}\r\n                    onClick={() => setFilterMode(FILTER_MODES.ALL)}\r\n                >\r\n                    All Contracts ({stats.open})\r\n                </button>\r\n                <button\r\n                    className={`control-button ${filterMode === FILTER_MODES.MISMATCH ? 'active' : ''}`}\r\n                    onClick={() => setFilterMode(FILTER_MODES.MISMATCH)}\r\n                >\r\n                    Mismatch Only ({stats.mismatch})\r\n                </button>\r\n                <button\r\n                    className={`control-button ${filterMode === FILTER_MODES.SWITCHBACK ? 'active' : ''}`}\r\n                    onClick={() => setFilterMode(FILTER_MODES.SWITCHBACK)}\r\n                >\r\n                    Start Switch Back ({stats.switchback})\r\n                </button>\r\n                <button\r\n                    className={`control-button ${filterMode === FILTER_MODES.EXPIRED ? 'active' : ''}`}\r\n                    onClick={() => setFilterMode(FILTER_MODES.EXPIRED)}\r\n                >\r\n                    Expired Cars ({stats.expired})\r\n                </button>\r\n            </div>\r\n\r\n            {loading && <div className=\"loading-message\">Loading data...</div>}\r\n            {error && <div className=\"error-message\">{error.message || String(error)}</div>}\r\n\r\n            {!loading && !error && (\r\n                <>\r\n                    {debouncedSearchTerm ? (\r\n                        <>\r\n                            <div className=\"search-section-header\" style={{\r\n                                margin: '20px auto 10px',\r\n                                color: '#1b5e20',\r\n                                border: '2px solid #2e7d32',\r\n                                borderRadius: '8px',\r\n                                padding: '5px 20px',\r\n                                width: 'fit-content',\r\n                                backgroundColor: '#e8f5e9',\r\n                                textAlign: 'center'\r\n                            }}>\r\n                                <h3 style={{ margin: 0 }}>📋 Open Contracts ({searchResults.openContractsFromSearch.length})</h3>\r\n                            </div>\r\n                            <DashboardTable\r\n                                data={searchResults.openContractsFromSearch} // No pagination for split results? Maybe just limit them. \r\n                                // Actually, let's paginate the search results too if they are huge. \r\n                                // For now, passing full data for split search might be okay if < 500. \r\n                                // But safer to slice. Let's slice only the *Active* tab? \r\n                                // The new design splits them. Let's paginate them separately? \r\n                                // Complexity. Let's just output them directly for Search as they are usually small.\r\n                                // Or better, apply pagination ONLY to the main view, and limiting search results to 100?\r\n                                // User said \"search takes time\". \r\n                                // Let's paginate the *Main* detailed View. For split view, render all (usually few).\r\n                                headers={headersConfig.open}\r\n                                visibleColumns={visibleColumns}\r\n                                columnWidths={columnWidths}\r\n                                onColumnResize={handleColumnResize}\r\n                                onToggleColumnMenu={handleToggleMenuOpen}\r\n                                showColumnMenu={activeMenuTable === 'open'}\r\n                                setShowColumnMenu={handleShowMenuNull}\r\n                                setVisibleColumns={setVisibleColumns}\r\n                                headerDisplayNames={headerDisplayNames}\r\n                                duplicatedContractsInfo={duplicatedContractsInfo}\r\n                                maintenanceData={maintenanceData}\r\n                                isCarExpired={isCarExpired}\r\n                                getExpiryDate={getExpiryDate}\r\n                                getIssueForRow={getIssueForRow}\r\n                                onCustomerClick={handleCustomerClick}\r\n                                onCopy={handleCopy}\r\n                            />\r\n\r\n                            <div className=\"search-section-header\" style={{\r\n                                margin: '30px auto 10px',\r\n                                color: '#b71c1c',\r\n                                border: '2px solid #c62828',\r\n                                borderRadius: '8px',\r\n                                padding: '5px 20px',\r\n                                width: 'fit-content',\r\n                                backgroundColor: '#ffebee',\r\n                                textAlign: 'center'\r\n                            }}>\r\n                                <h3 style={{ margin: 0 }}>🔒 Closed Contracts ({searchResults.closedContractsFromSearch.length})</h3>\r\n                            </div>\r\n                            <DashboardTable\r\n                                key=\"table-closed\"\r\n                                data={searchResults.closedContractsFromSearch}\r\n                                headers={headersConfig.master}\r\n                                visibleColumns={visibleColumns}\r\n                                columnWidths={columnWidths}\r\n                                onColumnResize={handleColumnResize}\r\n                                onToggleColumnMenu={handleToggleMenuClosed}\r\n                                showColumnMenu={activeMenuTable === 'closed'}\r\n                                setShowColumnMenu={handleShowMenuNull}\r\n                                setVisibleColumns={setVisibleColumns}\r\n                                headerDisplayNames={headerDisplayNames}\r\n                                duplicatedContractsInfo={duplicatedContractsInfo}\r\n                                maintenanceData={maintenanceData}\r\n                                isCarExpired={isCarExpired}\r\n                                getExpiryDate={getExpiryDate}\r\n                                getIssueForRow={getIssueForRow}\r\n                                onCustomerClick={handleCustomerClick}\r\n                                onCopy={handleCopy}\r\n                            />\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <div style={{ marginBottom: 10, fontWeight: 'bold', color: '#6a1b9a', textAlign: 'center' }}>\r\n                                Showing {filteredData.length} records (Page {currentPage})\r\n                            </div>\r\n                            <DashboardTable\r\n                                key=\"table-main\"\r\n                                data={paginateData(filteredData)}\r\n                                headers={currentHeaders}\r\n                                visibleColumns={visibleColumns}\r\n                                columnWidths={columnWidths}\r\n                                onColumnResize={handleColumnResize}\r\n                                onToggleColumnMenu={handleToggleMenuMain}\r\n                                showColumnMenu={activeMenuTable === 'main'}\r\n                                setShowColumnMenu={handleShowMenuNull}\r\n                                setVisibleColumns={setVisibleColumns}\r\n                                headerDisplayNames={headerDisplayNames}\r\n                                duplicatedContractsInfo={duplicatedContractsInfo}\r\n                                maintenanceData={maintenanceData}\r\n                                isCarExpired={isCarExpired}\r\n                                getExpiryDate={getExpiryDate}\r\n                                getIssueForRow={getIssueForRow}\r\n                                onCustomerClick={handleCustomerClick}\r\n                                onCopy={handleCopy}\r\n                            />\r\n                            <PaginationControls totalRows={filteredData.length} />\r\n                        </>\r\n                    )}\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":["normalize","str","s","toLowerCase","replace","cleanStr","letters","match","sort","join","normalizePhoneNumber","phone","cleaned","startsWith","length","concat","substring","r","e","t","f","n","Array","isArray","o","arguments","formatDateForDisplay","dateStr","trim","cleanDate","toString","dateTimeMatch","split","includes","parseSheetDate","parts","d","Date","isNaN","getTime","day","month","year","map","p","parseInt","UTC","getLatestDateIn","row","maintenanceData","invygoPlate","vehicleRecords","filter","m","datesIn","Boolean","datesOut","latestDateIn","Math","max","latestDateOut","isMismatch","isNumeric","Number","bookingNumber","ejar","ejarPlate","invygo","_ref","onCopy","open","setOpen","useState","coords","setCoords","top","left","buttonRef","useRef","useEffect","onScroll","window","addEventListener","removeEventListener","copyAndOpenWhatsApp","messageTemplate","toastMsg","normalizedPhone","phoneNumber","message","options","label","action","menu","_jsxs","style","position","width","height","zIndex","children","_jsx","right","bottom","onClick","transform","isUp","background","border","borderRadius","boxShadow","minWidth","opt","i","stopPropagation","display","padding","textAlign","cursor","borderBottom","type","_Fragment","ref","className","toggle","current","rect","getBoundingClientRect","innerHeight","scrollY","scrollX","ReactDOM","document","body","headers","visibleColumns","setVisibleColumns","setShowColumnMenu","headerDisplayNames","maxHeight","overflowY","fontWeight","marginBottom","justifyContent","alignItems","h","checked","onChange","toggleColumn","header","newVisible","push","a","b","indexOf","marginRight","DashboardTable","data","columnWidths","onColumnResize","onToggleColumnMenu","showColumnMenu","duplicatedContractsInfo","isCarExpired","getExpiryDate","getIssueForRow","onCustomerClick","finalHeaders","getColumnClass","key","marginLeft","fontSize","title","ColumnMenu","headerKey","_duplicatedContractsI","plate","normalizeStr","isDuplicated","mismatch","isCarRepaired","plates","plateNo1","plateNo2","hasExpiredCar","some","rowClass","clsx","copyIndexText","firstName","customer","text","ejarModel","invygoModel","color","undefined","originalIndex","content","val","colClass","gap","href","preventDefault","currentTarget","textDecoration","RowActions","actualVal","isExp","expD","normPlate","duplicates","otherContract","find","c","contractNo","backgroundColor","marginTop","actualModel","days","getDaysSinceLatestIn","latestDate","diffTime","diffDays","floor","closed_invygo","closed_other","memo","Toast","show","transition","contract","onClose","modalRef","closeButtonRef","_closeButtonRef$curre","handleKeyDown","focusable","querySelectorAll","first","last","shiftKey","activeElement","focus","validFields","contractType","status","pickupDate","dropoffDate","replacementDate","pickupBranch","onKeyDown","role","tabIndex","maxWidth","paddingBottom","id","margin","field","index","flexShrink","flexGrow","wordBreak","issue","idbProxyableTypes","cursorAdvanceMethods","cursorRequestMap","WeakMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","idbProxyTraps","get","target","prop","receiver","IDBTransaction","objectStoreNames","objectStore","wrap","set","value","has","wrapFunction","func","IDBDatabase","prototype","transaction","IDBCursor","advance","continue","continuePrimaryKey","_len2","args","_key2","apply","unwrap","this","_len3","_key3","storeNames","_len","_key","tx","call","transformCachableValue","done","Promise","resolve","reject","unlisten","complete","error","DOMException","cacheDonePromiseForTransaction","object","IDBObjectStore","IDBIndex","Proxy","instanceOfAny","IDBRequest","request","promise","success","result","then","catch","promisifyRequest","newValue","readMethods","writeMethods","cachedMethods","Map","getMethod","targetFuncName","useIndex","isWrite","method","async","storeName","store","shift","all","oldTraps","_objectSpread","callback","STORES","OPEN_CONTRACTS","CLOSED_INVYGO","CLOSED_OTHER","MAINTENANCE","CARS","METADATA","dbPromise","name","version","blocked","upgrade","blocking","terminated","indexedDB","openPromise","event","oldVersion","newVersion","db","openDB","contains","createObjectStore","keyPath","autoIncrement","dashboardDB","clearAll","Object","values","clear","saveAllData","saveToStore","items","item","put","openContracts","closedInvygo","closedOther","maintenance","cars","toISOString","getAllData","getAll","lastSync","fetchCSV","url","Error","response","fetch","ok","statusText","Papa","skipEmptyLines","results","mapData","mapping","newRow","keys","forEach","cleanKey","mappedKey","syncDashboardData","console","log","openContractsRaw","closedInvygoRaw","closedOtherRaw","GOOGLE_SHEETS_URLS","COLUMN_MAPPINGS","allData","timestamp","FILTER_MODES","ALL","MISMATCH","SWITCHBACK","EXPIRED","normalizedPlate","matchingVehicles","Vehicle","vehicleWithoutDateIn","DashboardPage","navigate","useNavigate","loading","filterMode","setFilterMode","debouncedSearchTerm","setDebouncedSearchTerm","filteredData","stats","searchResults","refreshData","isSyncing","setOpenContracts","closedContracts","setClosedContracts","setMaintenanceData","carsData","setCarsData","setLoading","setError","setLastSync","setIsSyncing","loadFromDB","useCallback","allClosed","res","newData","err","plateNo","car","today","setHours","expDate","mismatchRows","switchbackRows","expiredRows","useMemo","switchback","expired","plateMap","workerSearchResults","setWorkerSearchResults","openContractsFromSearch","closedContractsFromSearch","worker","Worker","URL","allContracts","postMessage","searchTerm","onmessage","terminate","onerror","useDashboardLogic","setSearchTerm","toastMessage","setToastMessage","showToast","setShowToast","activeMenuTable","setActiveMenuTable","saved","localStorage","getItem","JSON","parse","_unused","setColumnWidths","contact","model1","selectedContract","setSelectedContract","showModal","setShowModal","setItem","stringify","handleColumnResize","newWidth","prev","showToastNotification","msg","setTimeout","handleCopy","navigator","clipboard","writeText","headersConfig","master","revenueDate","currentHeaders","populated","Set","k","add","currentPage","setCurrentPage","handleToggleMenuOpen","handleToggleMenuClosed","handleToggleMenuMain","handleShowMenuNull","handleCustomerClick","PaginationControls","totalRows","totalPages","ceil","disabled","min","ContractModal","placeholder","toLocaleString","String","startIndex","slice","paginateData"],"sourceRoot":""}